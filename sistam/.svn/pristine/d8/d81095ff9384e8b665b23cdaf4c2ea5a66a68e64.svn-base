<?xml version="1.0" encoding="UTF-8" ?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:batch="http://www.springframework.org/schema/batch"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
            http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd
            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd
            http://www.springframework.org/schema/batch http://www.springframework.org/schema/batch/spring-batch-2.2.xsd">
      
    <import resource="classpath:/META-INF/spring/snarf-invoker-jobs.xml" />
    <import resource="classpath:/META-INF/spring/snarf-invoker-web.xml" />
    
    <bean id="configPropertiesConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location">
            <value>classpath:saf/config.properties</value>
        </property>
        <property name="placeholderPrefix" value="$["/>
        <property name="placeholderSuffix" value="]"/>
    </bean>    
    
    <bean id="commonPropertiesConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location">
            <value>classpath:common.properties</value>
        </property>
        <property name="placeholderPrefix" value="${"/>
        <property name="placeholderSuffix" value="}"/>
    </bean>
    
    <bean id="transactionManager" class="org.springframework.batch.support.transaction.ResourcelessTransactionManager"/>
    
    <bean id="tablePrefix" class="java.lang.String">
        <constructor-arg value="PMCA_CARGA.BATCH_" />
    </bean>
    
    <bean id="jobInvoker" class="br.com.petrobras.snarf.invoker.JobInvoker">
        <property name="service" ref="JobServiceImpl"/>
    </bean>
    
    <batch:job id="sistam-executarEnvioEmailParaRelatorioTimesheet" parent="parentRepeatableJob">
        <batch:step id="executarEnvioEmailParaRelatorioTimesheet">
            <batch:tasklet ref="jobTasklet"/>
        </batch:step>
    </batch:job>
    
    <bean name="/SistamJob.svlt" class="br.com.petrobras.snarf.invoker.JobHttpHandler">
        <property name="jobRunner" ref="springJobRunner"/>
        <property name="authorizedHosts"> 
            <value>${allowjobfrom},$[allowjobfrom]</value>
        </property>
    </bean>
</beans>